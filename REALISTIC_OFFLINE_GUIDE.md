# 🎯 DAMO Cashier 现实离线功能指南

## 📋 功能边界明确划分

### ✅ 可以离线使用
- **商品浏览**: 查看商品列表、分类、价格（缓存2小时）
- **购物车**: 本地添加商品、修改数量、计算总价
- **基础信息**: 店铺信息、用户基本信息（缓存1小时）

### ❌ 必须联网使用  
- **会员功能**: 手机号查询、积分余额操作
- **支付下单**: 所有支付和订单提交
- **库存管理**: 库存修改、商品上下架
- **统计报表**: 销售数据、交班对账

## 🛠️ 简化实现方案

### 1. 轻量级缓存管理
```javascript
// 只缓存商品和基础信息
const CACHE_CONFIG = {
  goods_list: 7200000,      // 商品列表 2小时
  goods_category: 14400000, // 商品分类 4小时
  store_info: 3600000,      // 店铺信息 1小时
}
```

### 2. 本地购物车
```javascript
// 购物车本地存储
const cartManager = {
  addItem(item) { /* 本地添加 */ },
  removeItem(id) { /* 本地删除 */ },
  calculateTotal() { /* 本地计算 */ }
}
```

### 3. 功能降级提示
```javascript
// 离线时禁用特定功能
if (!navigator.onLine) {
  disableFeatures(['member', 'payment', 'inventory'])
  showOfflineNotice()
}
```

## 📱 用户体验设计

### 离线状态栏
```
📡 离线模式 - 部分功能不可用
✅ 商品浏览  ❌ 会员查询  ❌ 支付下单
```

### 按钮状态
- 会员按钮: 禁用 + "需要网络连接"
- 支付按钮: 禁用 + "支付需要联网"
- 下单按钮: 禁用 + "下单需要联网"

## 🚀 实施建议

**现在的状态**: 离线功能文件已创建，但需要根据实际业务需求修正

**下一步**:
1. 你确认这个修正后的方案是否合理
2. 我重新实现简化版的离线功能
3. 或者你觉得当前收银系统不需要离线功能

**关于APP打包**: 
- 当前代码已经可以打包APP测试
- 离线功能是可选的增强特性
- 可以先打包测试基础功能，再决定是否需要离线功能

你觉得：
1. 需要我重新实现这个简化的离线功能吗？
2. 还是直接跳过离线功能，专注于APP打包测试？